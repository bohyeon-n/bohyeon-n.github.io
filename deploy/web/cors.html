<!DOCTYPE html>
<html lang="ko">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130684627-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-130684627-1');
  </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>
     CORS란? CORS를 해결해보자 |  구보현 블로그 
  </title>
  <meta name="description" content=" CORS가 무엇인지 알아보고 해결 방법을 찾아보자!">
  <meta name="keywords" content=" [ CORS, HTTP]">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atelier-dune-light.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
    integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.4.2/markdown-it.min.js">
  <link rel="stylesheet" href="/style/index.css">

</head>

<body class="body">
  <div class="header">
    <div class="user">
  <div class="user__content">
    <div class="user__img">
      <a href="/">
        <img src="  https://media.tenor.com/images/a629920aedaf98a619b8f1010434e621/tenor.png" alt="">
      </a>
    </div>

    <div class="user__username">
      <div>
         구보현 블로그 

      </div>
    </div>

  </div>
  <div>
    <div class="user__social">
      
        <a href=" https://github.com/bohyeon-n">

          <i class="fab fa-github-alt fa-2x"></i>



        </a>

        
          
            <i class="fab fa-facebook-square fa-2x"></i>
            
    </div>
    <div>
    </div>

  </div>

</div>
<div class="nav">
  <div>
    <ul>
      <a href="/index.html">
        <li class="nav__home">
          Home
        </li>
      </a>

      <li class="nav__category">
        Category
      </li>
      <a href="/deploy/author/author.html">
        <li class="nav__about">
          About
        </li>

      </a>

      <li class="nav__search ">
        <input type="text" id="searchInput">

        <i id='searchIcon' class="fas fa-search">
        </i>
      </li>
    </ul>

    <div class="category">
      
        <a href="/deploy/category/algorithm.html">
          <li>
            Algorithm

          </li>
        </a>
        
        <a href="/deploy/category/cs.html">
          <li>
            CS

          </li>
        </a>
        
        <a href="/deploy/category/css.html">
          <li>
            CSS

          </li>
        </a>
        
        <a href="/deploy/category/devops.html">
          <li>
            DevOps

          </li>
        </a>
        
        <a href="/deploy/category/http.html">
          <li>
            HTTP

          </li>
        </a>
        
        <a href="/deploy/category/javascript.html">
          <li>
            JavaScript

          </li>
        </a>
        
        <a href="/deploy/category/network.html">
          <li>
            Network

          </li>
        </a>
        
        <a href="/deploy/category/next.js.html">
          <li>
            Next.js

          </li>
        </a>
        
        <a href="/deploy/category/react.html">
          <li>
            React

          </li>
        </a>
        
        <a href="/deploy/category/typescript.html">
          <li>
            Typescript

          </li>
        </a>
        
        <a href="/deploy/category/web.html">
          <li>
            Web

          </li>
        </a>
        
        <a href="/deploy/category/etc.html">
          <li>
            etc

          </li>
        </a>
        
        <a href="/deploy/category/font-end.html">
          <li>
            font-end

          </li>
        </a>
        
        <a href="/deploy/category/front-end.html">
          <li>
            front-end

          </li>
        </a>
        
        <a href="/deploy/category/nodejs.html">
          <li>
            Nodejs

          </li>
        </a>
        
        <a href="/deploy/category/python.html">
          <li>
            Python

          </li>
        </a>
        
    </div>
  </div>
</div>
<div class="modal">
  <div class="modal__wrap">
    <div class="modal__content">
      <div class="modal__content-input">
        <input type="text" id="input" onkeyup="searchArticle()" placeholder="Type Something">
        <i class="fas fa-times-circle fa-2x delete"></i>
      </div>
      <div class="modal__content-list">
        <ul id="articleUl">
          
            <li>
              <a href="/deploy/algorithm/3sumclosest.html">
                <p>
                  3sum Closest

                </p>
                <p>

                  20180716

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/algorithm/besttimetobuyandsellstock.html">
                <p>
                  Best Time to Buy and Sell Stock

                </p>
                <p>

                  20180816

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/algorithm/add_binary.html">
                <p>
                  Add Binary - Python

                </p>
                <p>

                  20180818

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/algorithm/fibonacci.html">
                <p>
                  피보나치 수 구현하기

                </p>
                <p>

                  20180710

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/algorithm/fizz_buzz.html">
                <p>
                  FIZZ BUZZ in Python

                </p>
                <p>

                  20180825

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/algorithm/jewels_and_stones.html">
                <p>
                  Jewels and Stones

                </p>
                <p>

                  20180820

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/algorithm/move_zeros.html">
                <p>
                  Move Zeroes

                </p>
                <p>

                  20180824

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/algorithm/sortcolor.html">
                <p>
                  sort colors

                </p>
                <p>

                  20180718

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/cs/computer.html">
                <p>
                  컴퓨터의 작동원리

                </p>
                <p>

                  20180831

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/cs/hashmap.html">
                <p>
                  HashMap

                </p>
                <p>

                  20200223

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/css/flex-box.html">
                <p>
                  Flexbox

                </p>
                <p>

                  20200722

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/devops/github_action.html">
                <p>
                  Github Action, AWS CodeDeploy를 사용하여 자동 배포하기!

                </p>
                <p>

                  20201012

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/http/contditional-get-cache.html">
                <p>
                  [HTTP]conditional get과 Cache

                </p>
                <p>

                  20201019

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/http/method.html">
                <p>
                  [HTTP]HTTP Method

                </p>
                <p>

                  20200920

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/javascript/regexp.html">
                <p>
                  정규 표현식

                </p>
                <p>

                  20180719

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/javascript/class_prototype.html">
                <p>
                  [자바스크립트]prototype??

                </p>
                <p>

                  20201029

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/javascript/context.html">
                <p>
                  컨텍스트와 호이스팅 - JavaScript

                </p>
                <p>

                  20180830

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/javascript/react-calculator-test.html">
                <p>
                  [REACT]계산기 구현 + 테스트 코드

                </p>
                <p>

                  20201018

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/javascript/this.html">
                <p>
                  자바스크립트 this, bind 그리고 화살표 함수

                </p>
                <p>

                  20180806

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/javascript/this2.html">
                <p>
                  [자바스크립트]this는 뭘까?

                </p>
                <p>

                  20201009

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/network/internet-2.html">
                <p>
                  [네트워크]google.com을 입력하면 일어나는 일

                </p>
                <p>

                  20200914

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/network/internet.html">
                <p>
                  인터넷이 작동하는 방법

                </p>
                <p>

                  20180901

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/next.js/next-foundataion.html">
                <p>
                  [Next.js] Next.js를 학습하기 위한 기초

                </p>
                <p>

                  20220410

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/react/react_immutable.html">
                <p>
                  리액트의 상태가 불변해야 하는 이유

                </p>
                <p>

                  20210405

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/typescript/typechallenges-1.html">
                <p>
                  [TypeScript]Type Challenges - Pick, Readonly, Tuple of Object

                </p>
                <p>

                  20220319

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/typescript/typechallenges-2.html">
                <p>
                  [TypeScript]Type Challenges - First of Array, Length of Tuple, Exclude

                </p>
                <p>

                  20220323

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/typescript/typechallenges-3.html">
                <p>
                  [TypeScript]Type Challenges - Awaited, If, Concat

                </p>
                <p>

                  20220417

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/web/cors.html">
                <p>
                  CORS란? CORS를 해결해보자

                </p>
                <p>

                  20200522

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/web/image-upload.html">
                <p>
                  [Spring][React]이미지 업로드 기능 만들기

                </p>
                <p>

                  20200924

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/web/react_apache_error.html">
                <p>
                  React앱 Apache로 배포 시 404 에러 해결하기

                </p>
                <p>

                  20200823

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/web/rest.html">
                <p>
                  REST란?

                </p>
                <p>

                  20180810

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/etc/hls.html">
                <p>
                  HTTP Live Streaming

                </p>
                <p>

                  20220305

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/etc/peerdependencies.html">
                <p>
                  Peer Dependencies는 왜 쓸까?

                </p>
                <p>

                  20220501

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/etc/ssh.html">
                <p>
                  여러 github 계정 등록하기

                </p>
                <p>

                  20210117

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/font-end/aria.html">
                <p>
                  WAI-ARIA?

                </p>
                <p>

                  20210406

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/font-end/hello-redux.html">
                <p>
                  Redux 알아보기

                </p>
                <p>

                  20201219

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/front-end/jest-test.html">
                <p>
                  jest로 mocking하기

                </p>
                <p>

                  20210131

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/front-end/rollup.html">
                <p>
                  Rollup 사용법

                </p>
                <p>

                  20220403

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/nodejs/blog-2.html">
                <p>
                  정적 블로그 생성기 만들기! - 2탄

                </p>
                <p>

                  20180911

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/nodejs/blog-3.html">
                <p>
                  정적 블로그 생성기 만들기 - 댓글 기능 추가하기

                </p>
                <p>

                  20180918

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/nodejs/blog-4.html">
                <p>
                  정적 블로그 생성기 만들기 - 헤더와 소개 페이지

                </p>
                <p>

                  20181007

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/nodejs/blogindex.html">
                <p>
                  정적 블로그 생성기 만들기!

                </p>
                <p>

                  20180905

                </p>
              </a>

            </li>
            
            <li>
              <a href="/deploy/python/sort.html">
                <p>
                  Sorting in Python

                </p>
                <p>

                  20180824

                </p>
              </a>

            </li>
            
        </ul>

      </div>

    </div>

  </div>
</div>
<script>  

  document.querySelector('#searchInput').addEventListener('click', function () {
    document.querySelector('.modal').classList.add('modal', 'show')
    document.querySelector('#input').focus();
  }
  )
  document.querySelector('#searchIcon').addEventListener('click', function () {
    document.querySelector('.modal').classList.add('modal', 'show')
    document.querySelector('#input').focus();
  }
  )

  document.querySelector('.delete').addEventListener('click', function () {


    document.querySelector('.modal').classList.remove('show')
  })

  function searchArticle() {
    let input, filter, ul, li, a, i;
    input = document.getElementById('input')
    filter = input.value.toUpperCase();
    ul = document.getElementById('articleUl')
    li = ul.getElementsByTagName('li');
    for (i = 0; i < li.length; i++) {
      a = li[i].getElementsByTagName('a')[0];
      if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
        li[i].style.display = '';
      } else {
        li[i].style.display = 'none'
      }
    }

  }

</script>

  </div>



  <div class="content">

    <div class="main">
      <div class="article">


  <div class="value">
    <h1 style="color:#333">
       CORS란? CORS를 해결해보자

    </h1>
    <span>
       20200522

    </span>
  </div>


  <div class="article__body">
    <p>프로젝트를 하면서 프론트에서 서버에서 제공한 API로 요청하자, CORS 에러가 발생했다.
지금까지 CORS에러를 해결하기만 하고 정확히 CORS가 무엇이고 어떻게 동작하는지 알지 못했다.<br>
이번에 CORS가 어떻게 동작하고 CORS 에러를 해결하는 방법을 공부하였고 공부하면서 알게된 내용을 정래해보았다.</p>
<h2>CORS?</h2>
<p><strong>Cross Origin Resource Sharing</strong></p>
<p>CORS는 한 도메인 또는 Origin의 웹 페이지가 다른 도메인 (도메인 간 요청)을 가진 리소스에 액세스 할 수 있게하는 보안 메커니즘이다.</p>
<p>CORS는 서버와 클라이언트가 정해진 헤더를 통해 서로 요청이나 응답에 반응할지 결정하는 방식으로 <strong>CORS</strong>라는 이름으로 표준화 되었다.
CORS는 최신 브라우저에서 구현된 동일 출처 정책(same-origin policy) 때문에 등장했다.</p>
<h2>동일 출처 정책?</h2>
<p>동일 출처 정책은 동일한 출처의 리소스에만 접근하도록 제한하는 것이다.
여기서 출처는 프로토콜, 호스트명, 포트가 같다는 것을 의미한다.</p>
<p><code>https://naver.com:80</code>을 예시로 들면,
<code>https</code>는 프로토콜, <code>naver.com</code>은 호스트명 <code>80</code>은 포트다.</p>
<p>왜 동일한 출처에서만 접근하도록 허용하는 것일까?
모든 출처를 허용하면 어떻게 될까?</p>
<p><code>https://bank.com</code> 이라는 도메인 사이트가 있다 이 사이트의 api 주소는 <code>https://bank.com/api</code>이다. 사용자가 은행 사이트에서 로그인을 한 후 인증 토큰을 받았다.
그런데 사용자가 로그인한 상태에서 <code>https://evil.com</code>사이트에 접속하게 되면,
<code>https://evil.com</code>사이트에서 <code>https://bank.com/api</code>로 ajax 요청을 보낼 때 유저가 획득한 인증 토큰이 자동으로 첨부되어 사용자인척하면서 요청을 보낼 수 있게 된다.</p>
<p>이렇게 자동으로 쿠키가 첨부되기 때문에 보안상의 이유로 브라우저는 HTTP 호출을 동일한 출처로 제한했다.</p>
<h2>왜 CORS가 생겼을까?</h2>
<p>그럼 왜 CORS가 필요하게 됐을까?<br>
이전에는 동일한 도메인에서 리소스를 받아왔는데, 지금은 클라이언트에서 도메인이 다른 서버에서 제공하는 API를 사용하는 일이 많아졌다.<br>
그래서 이전처럼 동일한 도메인간의 요청만 할 수 없어졌고 CORS가 생겼다.</p>
<h2>CORS는 어떻게 동작할까?</h2>
<p>동일 출처 정책은 브라우저에서 임의로 하는 것이다. 즉 브라우저를 통하지 않고 요청을 보내거나 브라우저에서 동일 출처 정책이 아니라면, 동일 출처가 아니라도 요청을 보내고 응답을 받을 수 있다.
그럼 브라우저에서는 다른 출처로 요청을 보낼 때 어떻게 동작할까?</p>
<p>브라우저는 다른 출처로 요청을 보낼 때 다음과 같은 절차를 거친다.
우선 다른 출처라도, 다 같은 방식으로 동작하지 않는다. CORS 요청에는 simple request와 preflighted request 두 가지가 있다.</p>
<h3>Simple request</h3>
<p>simple 요청은 pre-flighted 요청을 보내지 않는다.</p>
<h4>simple request란 무엇인가.</h4>
<p>아래 3가지 조건 중 모두 만족하면, simpe request 이다.</p>
<ul>
<li>
<p>GET 요청, HEAD, POST 중의 한 가지 방식을 사용</p>
</li>
<li>
<p>POST 방식일 경우 conte-type이 아래 셋 중 하나여야 한다.</p>
<ul>
<li>application/x-www-form-unlencoded</li>
<li>multipart/form-data</li>
<li>text/plain</li>
</ul>
</li>
</ul>
<h4>simple request 과정</h4>
<p>simple 요청은 다음과 같은 과정을 거친다.</p>
<ol>
<li>요청을 보낸다.</li>
<li>브라우저는 Host와 같은 헤더를 추가하는 것 외에도 교차 출처 요청에 대해 Origin Request Header를 자동으로 추가한다.</li>
</ol>
<pre class="hljs"><code>GET /products/ HTTP/1.1
Host: api.domain.com
Origin: https://www.domain.com
</code></pre>
<ol start="3">
<li>서버에서 <code>Origin</code> 리퀘스트 헤더를 확인합니다. Origin 값이 허용되면, <code>Access-Control-Allow-Origin</code>요청 헤더 Origin 값으로 설정한다.</li>
</ol>
<pre class="hljs"><code>Http/1.1 200 OK
Access-Control-Allow-Origin: https://www.domain.com
Content-Type: application/json
</code></pre>
<ol start="4">
<li>응답을 받은 브라우저는 Access-Control-Allow-Origin 헤더가 탭의 출처와 일치하는지 확인한다. Access-Control-Allow-Origin 값이 정확히 출처와 일치하거나, &quot;*&quot; 와일드 카드 연산자를 포함하는 경우 검사가 통과된다.</li>
</ol>
<p>서버는 요청의 출처의 따라 요청을 허용할 지 결정할 수 있다. 브라우저는 Origin 요청 헤더가 정확하게 설정해야 한다.</p>
<h3>Preflighted request</h3>
<p>preflighted 요청은 simple request와는 다른 유형의 CORS 요청이다. 브라우저에서 진짜 요청을 보내기 전에 미리 확인 요청을 보낸다. 이 요청은 <code>OPTIONS</code> 메소드를 사용한다.</p>
<p>preflighted 요청은 다음과 같은 과정을 거친다.</p>
<ol>
<li>ajax 요청을 보낸다.</li>
</ol>
<pre class="hljs"><code>OPTIONS /products/ HTTP/1.1
Host: api.domain.com
Origin: https://www.domain.com
Access-Control-Request-Method: POST
Access-Control-Request-Headers: Authorization, Content-Type
</code></pre>
<ol start="2">
<li>서버는 허용된 메소드 및 헤더를 지정하여 응답한다.</li>
</ol>
<pre class="hljs"><code>HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://www.domain.com
Access-Control-Allow-Method: GET, POST, OPTIONS, PUT
Access-Control-Allow-Headers: Authorization, Content-Type
Content-Type: application/json
</code></pre>
<ol start="3">
<li>헤더와 메소드가 통과되면, 브라우저는 원래 CORS 요청을 보낸다.</li>
</ol>
<pre class="hljs"><code>POST /products/ HTTP/1.1
Host: api.domain.com
Authorization: token
Content-Type: application/json
Origin: https://www.domain.com
</code></pre>
<ol start="4">
<li>응답은 Access-Control-Allow-Origin 헤더에 올바른 출처가 있으므로 검사를 통과한다.</li>
</ol>
<h2>CORS 에러 해결하기</h2>
<p>지금까지 CORS에 대한 브라우저가 어떻게 동작하는지 알아보았다. 그렇다면, 우리가 클라이언트 개발자나 서버 개발자면 브라우저에게 어떻게 알려줄 수 있을까?</p>
<h3>클라이언트에서 해결하기</h3>
<ol>
<li>
<p>웹 브라우저 실행 옵션이나 플러그인을 통한 동일 출처 정책 회피하기</p>
<ul>
<li>동일 출처 정책은 브라우저에서 임의로 하는 것이기 때문에 브라우저에서 동일 출처 정책을 사용하지 않으며 된다.</li>
</ul>
</li>
<li>
<p>jsonp 방식으로 json 데이터 가져오기</p>
<ul>
<li>자바스크립트 파일이나 css 파일은 동일 출처 정책에 영향을 받지 않고 가져올 수 있다.</li>
<li>이를 이용해서 자바스크립트 파일을 가져와서 이를 json 형식으로 파싱해서 데이터를 사용할 수 있다.</li>
</ul>
</li>
</ol>
<h3>서버에서 해결하기</h3>
<h3>스프링 CORS</h3>
<h4>@CrossOrigin 어노테이션 사용하기</h4>
<p>메소드 레벨 및 글로벌 레벨에서 srping mvc 애플리케이션에서 spring cors를 지원하는 방법이다.
sprign mvc는 <code>@CorssOrigin</code> 어노테이션을 제공한다. 이 어노테이션은 어노테이션이 달린 메소드 또는 타입을 교차 출처를 허용하는 것으로 표시한다.</p>
<p>기본적으로 <code>@CrossOrigin</code>은 모든 출처, 모든 헤더, <code>@RequestMapping</code> 주석에 지정된 Http 메소드에 최대 30분을 허용한다.
어노테이션에 속성 값을 넣어 기본 값을 대체할 수 있다.</p>
<p>속성값을 살펴보면,</p>
<ul>
<li><code>origins</code>
<ul>
<li>허용된 출처, 이 값은 pre-flight 응답과 실제 응답 모두에 access-control-allow-origin헤더에 배치된다.</li>
</ul>
</li>
<li><code>allowedHeaders</code>
<ul>
<li>실제 요청 중에 사용할 수 있는 요청 헤더 목록이다. pre-flight의 응답 헤더인 access-control-allow-header에 값이 사용된다.</li>
</ul>
</li>
<li><code>allowCredential</code>
<ul>
<li>브라우저가 요청과 관련된 쿠키를 포함해야 되는지 여부를 결정한다.</li>
<li>이 값이 true이면, pre-flight 응답에는 값이 true로 설정된 access-control-allow-credentials 헤더가 포함된다.</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><span class="hljs-meta">@CrossOrigin(origin=&quot;*&quot;, allowedHeaders = &quot;*&quot;)</span>
<span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainController</span> </span>{
	<span class="hljs-meta">@GetMapping(path = &quot;/&quot;)</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">main</span><span class="hljs-params">(Model model)</span> </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;main&quot;</span>;
	}
}
</code></pre>
<h4>CorsFilter 사용하기</h4>
<p>서블릿 필터 인터페이스를 이용하여 개발되었다. 웹 서버의 모든 리소스의 요청을 가로채서 Cross domain request인지 체크하여 실제 요청 페이지에 전달하기전에 적절한 CORS 정책과 해더들을 적용한다.</p>
<ul>
<li>Access-Control-Allow-Origin
<ul>
<li>도메인 간 요청을 할 수 있는 권한이 부여된 도메인을 지정한다.</li>
</ul>
</li>
<li>Access-Control-Allow-Credentials
<ul>
<li>도메인 간 요청에 credential 권한이 있는지 없는지 지정한다.</li>
</ul>
</li>
<li>Access-Control-Expose-Headers
<ul>
<li>노출하기에 안전한 헤더를 나타낸다.</li>
</ul>
</li>
<li>Access-Control-Max-Age
<ul>
<li>pre-flighted 요청이 얼마만큼의 시간동안 캐시되는지</li>
</ul>
</li>
<li>Access-Control-Allow-Methods
<ul>
<li>리소스에 접근할 때 메소드가 허용되는지</li>
</ul>
</li>
<li>Access-Control-Allow-Headers
<ul>
<li>어떤 헤더 필드 네임이 실제 요청에서 사용할 수 있는지 가리킨다.</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleCorsFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest req, ServletResponse res, FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>{
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;
        response.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>, request.getHeader(<span class="hljs-string">&quot;Origin&quot;</span>));
        response.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>);
        response.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="hljs-string">&quot;POST, GET, OPTIONS, DELETE, PUT, PATCH&quot;</span>);
        response.setHeader(<span class="hljs-string">&quot;Access-Control-Max-Age&quot;</span>, <span class="hljs-string">&quot;3600&quot;</span>);
        response.setHeader(<span class="hljs-string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="hljs-string">&quot;Content-Type, Accept, X-Requested-With, remember-me&quot;</span>);
        chain.doFilter(req, res);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> </span>{
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>{
    }
}
</code></pre>
<h2>정리</h2>
<p>CORS 에러를 클라이언트에서 해결할 수 있는 방법이 있는지 몰랐다. 서버에서만 허용이 가능한 것인줄만 알았는데, 브라우저에서 컨트롤하는 것이었다니!
정확한 동작 방식을 알고 나니 사용한 코드도 더 잘 이해된다. 🏃🏽‍♀️🏃🏽‍♀️</p>
<h2>참고한 자료</h2>
<p>https://brownbears.tistory.com/336</p>

  </div>

</div>

  <div id="disqus_thread"></div>
  <script>

    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/



    // var disqus_config = function () {
    //   this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    //   this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    // };

    (function () { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://bohyeon-n.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>

    </div>
    <div class="sidebar">
      <!-- folder name -->
<div>
  Category
</div>
<ul>

  
    
      <a href="/deploy/category/algorithm.html">
        <li>
          Algorithm
            (
            8 )
        </li>
      </a>

      
    
      <a href="/deploy/category/cs.html">
        <li>
          CS
            (
            2 )
        </li>
      </a>

      
    
      <a href="/deploy/category/css.html">
        <li>
          CSS
            (
            1 )
        </li>
      </a>

      
    
      <a href="/deploy/category/devops.html">
        <li>
          DevOps
            (
            1 )
        </li>
      </a>

      
    
      <a href="/deploy/category/http.html">
        <li>
          HTTP
            (
            2 )
        </li>
      </a>

      
    
      <a href="/deploy/category/javascript.html">
        <li>
          JavaScript
            (
            6 )
        </li>
      </a>

      
    
      <a href="/deploy/category/network.html">
        <li>
          Network
            (
            2 )
        </li>
      </a>

      
    
      <a href="/deploy/category/next.js.html">
        <li>
          Next.js
            (
            1 )
        </li>
      </a>

      
    
      <a href="/deploy/category/react.html">
        <li>
          React
            (
            1 )
        </li>
      </a>

      
    
      <a href="/deploy/category/typescript.html">
        <li>
          Typescript
            (
            3 )
        </li>
      </a>

      
    
      <a href="/deploy/category/web.html">
        <li>
          Web
            (
            4 )
        </li>
      </a>

      
    
      <a href="/deploy/category/etc.html">
        <li>
          etc
            (
            3 )
        </li>
      </a>

      
    
      <a href="/deploy/category/font-end.html">
        <li>
          font-end
            (
            2 )
        </li>
      </a>

      
    
      <a href="/deploy/category/front-end.html">
        <li>
          front-end
            (
            2 )
        </li>
      </a>

      
    
      <a href="/deploy/category/nodejs.html">
        <li>
          Nodejs
            (
            4 )
        </li>
      </a>

      
    
      <a href="/deploy/category/python.html">
        <li>
          Python
            (
            1 )
        </li>
      </a>

      
</ul>

    </div>


  </div>
  <button id="goUp" onclick="topFunction()">
    <i class="fas fa-arrow-circle-up"></i>
  </button>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.4.2/markdown-it.js"></script>
  <script>
    const categoryEl = document.querySelector('.category')
    const navCategoryEl = document.querySelector('.nav__category')
    navCategoryEl.addEventListener('click', e => {
      if (!categoryEl.classList.contains('show')) {
        categoryEl.classList.add('show')


      } else {
        categoryEl.classList.remove('show');
      }
    })

    window.onscroll = function () {
      scrollFunction()
    }

    function scrollFunction() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        document.getElementById('goUp').style.display = "block";
      } else {
        document.getElementById('goUp').style.display = 'none';
      }
    }

    function topFunction() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
  </script>

</body>

</html>